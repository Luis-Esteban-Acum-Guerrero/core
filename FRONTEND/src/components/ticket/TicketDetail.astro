---
import TicketDetailHead from "./TicketDetailHead.astro";
import TicketDetailChat from "./TicketDetailChat.astro";
import TicketDetailFooter from "./TicketDetailFooter.astro";
import TicketDetailAside from "./TicketDetailAside.astro";

// obtengo los tickets desde la base de datos.
const { tickets } = Astro.props;
---

{
  tickets.map((ticket, index) => (
    <div
      id={`hs-pro-tabs-${ticket.UID}`}
      role="tabpanel"
      aria-labelledby={`hs-pro-tabs-${ticket.UID}-item`}
      class={index === 0 ? "" : "hidden"}
    >
      <div class="relative h-dvh flex flex-col justify-end">
        {/* HEADER */}
        <TicketDetailHead key={ticket.UID} ticket={ticket} />

        {/* CHAT */}
        <TicketDetailChat ticket={ticket.UID} />

        {/* FOOTER */}
        <TicketDetailFooter />

        {/* ASIDE */}
        <TicketDetailAside ticket={ticket} />
      </div>
    </div>
  ))
}

<!-- TICKET VACIO -->
<!--
<div
  id="hs-pro-tabs-chtcpt-10"
  class="hidden"
  role="tabpanel"
  aria-labelledby="hs-pro-tabs-chtcpt-item-10"
>
  <div class="relative h-dvh flex flex-col justify-end">
    <div
      class="h-full p-2 pb-8 sm:p-4 overflow-y-auto overflow-x-hidden [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-core-light [&::-webkit-scrollbar-thumb]:bg-core-gray/50 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500"
    >
      <div class="h-full flex flex-col justify-center items-center text-center">
        <span class="py-1.5 inline-flex gap-x-1">
          <span
            class="size-2.5 bg-core-dark rounded-full animate-[typing_1s_ease-in-out_infinite] dark:bg-neutral-200"
          ></span>
          <span
            class="size-2.5 bg-core-dark rounded-full animate-[typing_1s_ease-in-out_infinite_0.2s] dark:bg-neutral-200"
          ></span>
          <span
            class="size-2.5 bg-core-dark rounded-full animate-[typing_1s_ease-in-out_infinite_0.4s] dark:bg-neutral-200"
          ></span>
        </span>
        <p class="mt-3 text-sm text-core-gray dark:text-neutral-500">
          This is a placeholder loader.<br />This conent is empty.
        </p>
      </div>
    </div>
  </div>

  <aside
    id="hs-pro-chtsdid10"
    class="hs-overlay [--body-scroll:true] 2xl:[--overlay-backdrop:false] [--is-layout-affect:true] [--opened:2xl] [--auto-close:2xl] hs-overlay-open:translate-x-0 2xl:hs-overlay-layout-open:translate-x-0 translate-x-full transition-all duration-300 transform sm:w-96 w-full hidden fixed bottom-0 end-0 z-10 top-0 h-full bg-core-light border-s border-core-gray 2xl:block 2xl:translate-x-full 2xl:bottom-0 dark:bg-neutral-800 dark:border-neutral-700"
    tabindex="-1"
    aria-labelledby="hs-pro-chtsdid10-label"
  >
    <div class="h-full flex flex-col">
      <div
        class="py-3 px-5 flex justify-between items-center border-b border-core-gray dark:border-neutral-800"
      >
        <span
          id="hs-pro-chtsdid10-label"
          class="block font-semibold text-core-dark dark:text-neutral-200"
        >
          Details
        </span>

        <div class="absolute top-2 end-4 z-10">
          <button
            type="button"
            class="size-8 inline-flex justify-center items-center gap-x-2 rounded-full border border-transparent bg-core-light text-core-dark hover:bg-core-gray/30 focus:outline-hidden focus:bg-core-gray/30 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:text-core-gray dark:focus:bg-neutral-700"
            aria-label="Close"
            data-hs-overlay="#hs-pro-chtsdid10"
          >
            <span class="sr-only">Close</span>
            <svg
              class="shrink-0 size-4"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M18 6 6 18"></path>
              <path d="m6 6 12 12"></path>
            </svg>
          </button>
        </div>
      </div>

      <div
        class="h-full overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-core-light [&::-webkit-scrollbar-thumb]:bg-core-gray/50 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500"
      >
        <div
          class="p-5 h-full flex flex-col justify-center items-center text-center"
        >
          <svg
            class="w-48 mx-auto mb-4"
            width="178"
            height="90"
            viewBox="0 0 178 90"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect
              x="27"
              y="50.5"
              width="124"
              height="39"
              rx="7.5"
              fill="currentColor"
              class="fill-white dark:fill-neutral-800"></rect>
            <rect
              x="27"
              y="50.5"
              width="124"
              height="39"
              rx="7.5"
              stroke="currentColor"
              class="stroke-gray-50 dark:stroke-neutral-700/10"></rect>
            <rect
              x="34.5"
              y="58"
              width="24"
              height="24"
              rx="12"
              fill="currentColor"
              class="fill-gray-50 dark:fill-neutral-700/30"></rect>
            <rect
              x="66.5"
              y="61"
              width="60"
              height="6"
              rx="3"
              fill="currentColor"
              class="fill-gray-50 dark:fill-neutral-700/30"></rect>
            <rect
              x="66.5"
              y="73"
              width="77"
              height="6"
              rx="3"
              fill="currentColor"
              class="fill-gray-50 dark:fill-neutral-700/30"></rect>
            <rect
              x="19.5"
              y="28.5"
              width="139"
              height="39"
              rx="7.5"
              fill="currentColor"
              class="fill-white dark:fill-neutral-800"></rect>
            <rect
              x="19.5"
              y="28.5"
              width="139"
              height="39"
              rx="7.5"
              stroke="currentColor"
              class="stroke-gray-100 dark:stroke-neutral-700/30"></rect>
            <rect
              x="27"
              y="36"
              width="24"
              height="24"
              rx="12"
              fill="currentColor"
              class="fill-gray-100 dark:fill-neutral-700/70"></rect>
            <rect
              x="59"
              y="39"
              width="60"
              height="6"
              rx="3"
              fill="currentColor"
              class="fill-gray-100 dark:fill-neutral-700/70"></rect>
            <rect
              x="59"
              y="51"
              width="92"
              height="6"
              rx="3"
              fill="currentColor"
              class="fill-gray-100 dark:fill-neutral-700/70"></rect>
            <g filter="url(#filter10)">
              <rect
                x="12"
                y="6"
                width="154"
                height="40"
                rx="8"
                class="fill-white dark:fill-neutral-800"
                shape-rendering="crispEdges"></rect>
              <rect
                x="12.5"
                y="6.5"
                width="153"
                height="39"
                rx="7.5"
                stroke="currentColor"
                class="stroke-gray-100 dark:stroke-neutral-700/60"
                shape-rendering="crispEdges"></rect>
              <rect
                x="20"
                y="14"
                width="24"
                height="24"
                rx="12"
                fill="currentColor"
                class="fill-gray-200 dark:fill-neutral-700"></rect>
              <rect
                x="52"
                y="17"
                width="60"
                height="6"
                rx="3"
                fill="currentColor"
                class="fill-gray-200 dark:fill-neutral-700"></rect>
              <rect
                x="52"
                y="29"
                width="106"
                height="6"
                rx="3"
                fill="currentColor"
                class="fill-gray-200 dark:fill-neutral-700"></rect>
            </g>
            <defs>
              <filter
                id="filter10"
                x="0"
                y="0"
                width="178"
                height="64"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood flood-opacity="0" result="BackgroundImageFix"
                ></feFlood>
                <feColorMatrix
                  in="SourceAlpha"
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha"></feColorMatrix>
                <feOffset dy="6"></feOffset>
                <feGaussianBlur stdDeviation="6"></feGaussianBlur>
                <feComposite in2="hardAlpha" operator="out"></feComposite>
                <feColorMatrix
                  type="matrix"
                  values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.03 0"
                ></feColorMatrix>
                <feBlend
                  mode="normal"
                  in2="BackgroundImageFix"
                  result="effect1_dropShadow_1187_14810"></feBlend>
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="effect1_dropShadow_1187_14810"
                  result="shape"></feBlend>
              </filter>
            </defs>
          </svg>

          <div class="max-w-sm mx-auto text-wrap">
            <p class="mt-2 font-medium text-core-dark dark:text-neutral-200">
              No tickets
            </p>
            <p class="mb-5 text-sm text-core-gray dark:text-neutral-500">
              Only ticket details appear here
            </p>
          </div>
        </div>
      </div>
    </div>
  </aside>
</div>
 -->
