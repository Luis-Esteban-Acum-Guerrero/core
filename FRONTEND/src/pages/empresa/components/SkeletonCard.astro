---
// SkeletonCard.astro - Componentes de loading skeleton para diferentes usos
interface SkeletonProps {
  type?: 'card' | 'table' | 'form' | 'list' | 'avatar';
  lines?: number;
  showAvatar?: boolean;
  width?: string;
  height?: string;
}

const { type = 'card', lines = 3, showAvatar = false, width = '100%', height = 'auto' }: SkeletonProps = Astro.props;
---

<!-- Animated skeleton loading states -->
<div class="animate-pulse" style={`width: ${width}; height: ${height};`}>

  <!-- Card Skeleton -->
  {type === 'card' && (
    <div class="p-4 bg-white rounded-xl border border-core-gray dark:bg-neutral-800 dark:border-neutral-700">
      <div class="flex items-start gap-4">
        {showAvatar && (
          <div class="shrink-0 w-10 h-10 bg-core-gray/30 rounded-full dark:bg-neutral-700"></div>
        )}
        <div class="flex-1 space-y-3">
          <div class="h-4 bg-core-gray/30 rounded w-3/4 dark:bg-neutral-700"></div>
          <div class="h-3 bg-core-gray/30 rounded w-1/2 dark:bg-neutral-700"></div>
          <div class="space-y-2">
            {Array.from({ length: lines }).map(() => (
              <div class="h-3 bg-core-gray/30 rounded w-full dark:bg-neutral-700"></div>
            ))}
          </div>
        </div>
      </div>
    </div>
  )}

  <!-- Table Skeleton -->
  {type === 'table' && (
    <div class="overflow-x-auto">
      <table class="min-w-full">
        <thead class="bg-core-light dark:bg-neutral-700">
          <tr>
            {Array.from({ length: 5 }).map((_, i) => (
              <th key={i} class="px-6 py-3 text-left">
                <div class="h-4 bg-core-gray/30 rounded w-20 dark:bg-neutral-700"></div>
              </th>
            ))}
          </tr>
        </thead>
        <tbody class="divide-y divide-core-gray dark:divide-neutral-700">
          {Array.from({ length: 5 }).map((_, i) => (
            <tr key={i}>
              {Array.from({ length: 5 }).map((_, j) => (
                <td key={j} class="px-6 py-4">
                  <div class="h-4 bg-core-gray/30 rounded w-full dark:bg-neutral-700"></div>
                </td>
              ))}
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  )}

  <!-- Form Skeleton -->
  {type === 'form' && (
    <div class="space-y-6">
      {Array.from({ length: lines }).map((_, i) => (
        <div key={i} class="space-y-2">
          <div class="h-4 bg-core-gray/30 rounded w-1/4 dark:bg-neutral-700"></div>
          <div class="h-10 bg-core-gray/30 rounded-lg dark:bg-neutral-700"></div>
        </div>
      ))}
      <div class="h-10 bg-core-gray/30 rounded-lg w-1/3 dark:bg-neutral-700"></div>
    </div>
  )}

  <!-- List Skeleton -->
  {type === 'list' && (
    <div class="space-y-4">
      {Array.from({ length: lines }).map((_, i) => (
        <div key={i} class="flex items-center gap-4 p-4 bg-white rounded-lg border border-core-gray dark:bg-neutral-800 dark:border-neutral-700">
          <div class="w-12 h-12 bg-core-gray/30 rounded-full dark:bg-neutral-700"></div>
          <div class="flex-1 space-y-2">
            <div class="h-4 bg-core-gray/30 rounded w-3/4 dark:bg-neutral-700"></div>
            <div class="h-3 bg-core-gray/30 rounded w-1/2 dark:bg-neutral-700"></div>
          </div>
          <div class="w-6 h-6 bg-core-gray/30 rounded dark:bg-neutral-700"></div>
        </div>
      ))}
    </div>
  )}

  <!-- Avatar Skeleton -->
  {type === 'avatar' && (
    <div class="flex items-center gap-4">
      <div class="w-12 h-12 bg-core-gray/30 rounded-full dark:bg-neutral-700"></div>
      <div class="flex-1 space-y-2">
        <div class="h-4 bg-core-gray/30 rounded w-32 dark:bg-neutral-700"></div>
        <div class="h-3 bg-core-gray/30 rounded w-48 dark:bg-neutral-700"></div>
      </div>
    </div>
  )}

</div>

<style>
  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: .5;
    }
  }
</style>